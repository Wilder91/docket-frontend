(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=(n(99),n(39)),c=n(8),l=n(2),i=Object(r.createContext)(),s=n(69);var u=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(""),m=Object(l.a)(u,2),d=m[0],f=m[1],p=Object(r.useState)(""),h=Object(l.a)(p,2),g=h[0],v=h[1],E=Object(r.useState)(""),b=Object(l.a)(E,2),y=b[0],j=b[1],w=Object(r.useState)(""),O=Object(l.a)(w,2),S=O[0],N=O[1],k=Object(c.p)();function _(){fetch("http://localhost:3000/users/",{method:"GET",headers:new Headers({Authorization:sessionStorage.customAuthToken})}).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(function(e){!function(e){var t=e.find(function(e){return e.email===sessionStorage.email});o(t)}(e)}).catch(function(e){console.error("Error fetching users:",e)})}return Object(r.useEffect)(function(){sessionStorage.token&&k("/")},[k]),Object(r.useEffect)(function(){"success"===S&&n&&k("/",{user:n})},[S,k,n]),a.a.createElement("div",null,a.a.createElement("div",{id:"signinDiv"}),a.a.createElement(i.Provider,{value:[n,o]},a.a.createElement("form",{className:"normal",onSubmit:function(e){e.preventDefault(),fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:g})}).then(function(e){if(e.ok)return e.json();throw new Error("Authentication error")}).then(function(e){var t=e.token,n=e.email;sessionStorage.setItem("token",t),sessionStorage.setItem("email",n),N("success"),_()}).catch(function(e){console.error("Authentication error:",e),"Authentication error"===e.message?j("Incorrect Email or Password"):j("Server is currently unavailable. Please try again later."),N("failure")})}},a.a.createElement("img",{src:"/2.png",id:"DDLogo",className:"LoginLogo",alt:"logo"}),a.a.createElement("br",null),a.a.createElement("h3",null,"Docket"),a.a.createElement("div",null,a.a.createElement("input",{required:!0,className:"input-container",placeholder:"E-Mail Address",id:"email",type:"text",value:d,onChange:function(e){return f(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("input",{required:!0,className:"input-container",placeholder:"Password",id:"password",type:"password",value:g,onChange:function(e){return v(e.target.value)}}),y&&a.a.createElement("p",{className:"error-message"},y)),a.a.createElement("br",null),a.a.createElement("button",{type:"submit",className:"nice-button"},"Log In"),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){k("/signup")},className:"signup-button",type:"button"},"Sign Up"),a.a.createElement("br",null),a.a.createElement("div",{className:"google-button"},a.a.createElement(s.a,{onSuccess:function(e){console.log("Google sign-in successful:",e);var t=e.credential,n=JSON.parse(atob(t.split(".")[1]));console.log(n);var r=n.email;sessionStorage.setItem("email",r),sessionStorage.setItem("google_token",t),fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({google_email:r,google_token:t})}).then(function(e){if(e.ok)return e.json();throw new Error("Authentication error")}).then(function(e){var t=e.token;console.log(e),sessionStorage.setItem("token",t),console.log(sessionStorage),_(),k("/")}).catch(function(e){console.error("Authentication error:",e),j("Failed to authenticate with Google. Please try again later.")})},onError:function(){console.log("Login Failed")},shape:"pill"})))))},m=n(13),d=n(14),f=n(32);function p(){p=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof E?t:E,c=Object.create(o.prototype),l=new L(r||[]);return a(c,"_invoke",{value:_(e,n,l)}),c}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",h="executing",g="completed",v={};function E(){}function b(){}function y(){}var j={};s(j,c,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==n&&r.call(O,c)&&(j=O);var S=y.prototype=E.prototype=Object.create(j);function N(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,c,l){var i=m(e[a],e,o);if("throw"!==i.type){var s=i.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,c,l)},function(e){n("throw",e,c,l)}):t.resolve(u).then(function(e){s.value=e,c(s)},function(e){return n("throw",e,c,l)})}l(i.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function _(t,n,r){var a=d;return function(o,c){if(a===h)throw new Error("Generator is already running");if(a===g){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var l=r.delegate;if(l){var i=x(l,r);if(i){if(i===v)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var s=m(t,n,r);if("normal"===s.type){if(a=r.done?g:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=g,r.method="throw",r.arg=s.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=m(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=y,a(S,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:b,configurable:!0}),b.displayName=s(y,i,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,i,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(k.prototype),s(k.prototype,l,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new k(u(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then(function(e){return e.done?e.value:c.next()})},N(S),s(S,i,"Generator"),s(S,c,function(){return this}),s(S,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],l=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var i=r.call(c,"catchLoc"),s=r.call(c,"finallyLoc");if(i&&s){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var h=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(""),s=Object(l.a)(i,2),u=s[0],h=s[1],g=Object(r.useState)(""),v=Object(l.a)(g,2),E=v[0],b=v[1],y=Object(c.p)(),j=function(){var e=Object(m.a)(p().mark(function e(t){var r,a;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("http://localhost:3000/users",{method:"POST",body:JSON.stringify({name:n,email:u,password:E}),headers:{"Content-Type":"application/json",Authorization:localStorage.token}});case 4:if(201!==(r=e.sent).status){e.next=12;break}h(""),b(""),alert("Successfully created account."),fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:E})}).then(function(e){return e.json()}).then(function(e){sessionStorage.setItem("token",e.token),sessionStorage.setItem("email",e.email),console.log(window.sessionStorage.token),y("/",{replace:!0})}),e.next=17;break;case 12:return e.next=14,r.json();case 14:a=e.sent,alert(a.errors),console.log(a);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0);case 22:case"end":return e.stop()}},e,null,[[1,19]])}));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"form-container"},a.a.createElement(d.a,{className:"normal",onSubmit:j},a.a.createElement("h3",null,"Sign Up"),a.a.createElement(d.a.Group,{controlId:"name"},a.a.createElement(d.a.Label,null,"Name"),a.a.createElement(d.a.Control,{type:"text",placeholder:"Name",value:n,onChange:function(e){return o(e.target.value)},required:!0})),a.a.createElement(d.a.Group,{controlId:"email"},a.a.createElement(d.a.Label,null,"Email Address"),a.a.createElement(d.a.Control,{type:"email",placeholder:"Email Address",value:u,onChange:function(e){return h(e.target.value)},required:!0})),a.a.createElement(d.a.Group,{controlId:"password"},a.a.createElement(d.a.Label,null,"Password"),a.a.createElement(d.a.Control,{type:"password",placeholder:"Password",value:E,onChange:function(e){return b(e.target.value)},required:!0})),a.a.createElement(f.a,{type:"submit",variant:"primary",className:"signup-button"},"Sign Up"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("a",{href:"/"},"Return to Log In")))},g=n(11),v=n(3),E=n(29),b=n(118),y=n(15),j=n.n(y);var w=function(e){e.user;var t=e.setUser,n=e.project,o=e.setProjects,c=e.setMilestones,i=e.setEditFormOpen,s=Object(r.useState)(""),u=Object(l.a)(s,2),m=u[0],d=u[1],f=Object(r.useState)(""),p=Object(l.a)(f,2),h=p[0],g=p[1],E=Object(r.useState)(""),b=Object(l.a)(E,2),y=b[0],w=b[1],O=Object(r.useState)(""),S=Object(l.a)(O,2),N=S[0],k=S[1],_=Object(r.useState)({}),x=Object(l.a)(_,2),C=x[0],T=x[1];function L(e){o(function(t){return t.map(function(t){return t.id===e.id?Object(v.a)({},t,e):t})}),c(function(n){var r=n.map(function(t){if(t.project_id===e.id){var n=j()(e.due_date).subtract(t.lead_time,"day"),r=Object(v.a)({},t,{project_name:e.name,due_date:n});return function(e){fetch("http://localhost:3000/milestones/".concat(e.id),{method:"PATCH",body:JSON.stringify({name:e.name,due_date:e.due_date}),headers:new Headers({Authorization:"".concat(sessionStorage.token),"Content-Type":"application/json"})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).catch(function(e){console.error(e)})}(r),r}return t});return c(r),t(function(e){return Object(v.a)({},e,{milestones:r})}),r})}return Object(r.useEffect)(function(){d(n.name),w(n.kind),g(n.due_date)},[]),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),fetch("http://localhost:3000/projects/".concat(n.id),{method:"PATCH",body:JSON.stringify({name:m,kind:y,due_date:h}),headers:new Headers({Authorization:"".concat(sessionStorage.token),"Content-Type":"application/json"})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).then(function(t){L(t),i(!1),k("Project updated!"),e.target.reset()}).catch(function(e){console.error(e),T({general:"An error occurred while updating the project."}),console.log(C)})}},a.a.createElement("input",{required:!0,type:"text",defaultValue:n.name,className:"input-container",onChange:function(e){return d(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("input",{type:"text",defaultValue:n.kind,className:"input-container",maxLength:50,onChange:function(e){return w(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("input",{required:!0,type:"date",defaultValue:n.due_date,className:"input-container",onChange:function(e){return g(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("button",{className:"normal",type:"submit"},"Update"),a.a.createElement("div",{className:"message"},N?a.a.createElement("p",null,N):null))};var O=function(e){e.user;var t=e.setUser,n=e.project,o=(e.milestones,e.setMilestones),c=e.hideMilestoneForm,i=Object(r.useState)(""),s=Object(l.a)(i,2),u=s[0],m=s[1],p=Object(r.useState)(""),h=Object(l.a)(p,2),E=h[0],b=h[1],y=Object(r.useState)(""),w=Object(l.a)(y,2),O=w[0],S=w[1],N=Object(r.useState)(!1),k=Object(l.a)(N,2),_=k[0],x=k[1],C=Object(r.useState)(""),T=Object(l.a)(C,2),L=T[0],D=T[1];return Object(r.useEffect)(function(){console.log(n),S("")},[u,E]),Object(r.useEffect)(function(){var e=""!==u.trim()&&""!==E.trim();x(e)},[u,E]),a.a.createElement(d.a,{className:"embed",onSubmit:function(e){e.preventDefault(),fetch("http://localhost:3000/milestones",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(sessionStorage.token)},body:JSON.stringify({name:u,date:E,lead_time:j()(E).diff(j()(n.due_date),"days"),project_name:n.name,project_id:n.id})}).then(function(e){if(!e.ok)throw new Error("Error submitting form");return e.json()}).then(function(e){!function(e){o(function(t){return[].concat(Object(g.a)(t),[{id:e.id,name:e.name,description:e.description,due_date:e.due_date,project_id:n.id,project_name:e.project_name}]).sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)})}),t(function(t){return Object(v.a)({},t,{milestones:[].concat(Object(g.a)(t.milestones),[{id:e.id,name:e.name,description:e.description,due_date:e.due_date,project_id:n.id,project_name:e.project_name}]).sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)})})})}(e),D("Milestone created successfully."),setTimeout(function(){D(""),c(),m(""),b("")},1e3)}).catch(function(e){S(e.message)})}},a.a.createElement("h1",null,"New Milestone"),a.a.createElement(d.a.Group,{controlId:"formMilestoneName"},a.a.createElement(d.a.Label,null,"Name"),a.a.createElement(d.a.Control,{type:"text",value:u,placeholder:"Name",onChange:function(e){m(e.target.value)},required:!0})),a.a.createElement(d.a.Group,{controlId:"formMilestoneDate"},a.a.createElement(d.a.Label,null,"Date"),a.a.createElement(d.a.Control,{type:"date",value:E,placeholder:"Date",onChange:function(e){b(e.target.value)},required:!0})),O&&a.a.createElement("p",{style:{color:"red"}},O),L&&a.a.createElement("p",{style:{color:"green"}},L),a.a.createElement(f.a,{type:"submit",disabled:!_},"Submit"))},S=n(88),N=n(89);n(103);var k=function(e){var t=e.project,n=e.showProject,o=e.milestones,c=e.showEditForm,i=e.confirmDeleteProject,s=e.showMilestoneForm,u=e.selectedProject,m=e.hideProject,d=j()(),f=j()(t.due_date),p=Object(r.useState)(!1),h=Object(l.a)(p,2),g=h[0],v=h[1],E=Object(r.useState)([]),b=Object(l.a)(E,2),y=b[0],w=b[1];return Object(r.useEffect)(function(){var e=o.filter(function(e){return e.project_id===t.id}),n=e.filter(function(e){return!0===e.complete}).length/e.length*100;w(n)},[o,t.id]),a.a.createElement("li",{key:t.id},a.a.createElement(S.a,{className:t===u?"bootstrap_card grey-effect":"bootstrap_card",onClick:function(){return function(e){n(e),v(!g)}(t)},onHide:function(){return m(t)}},a.a.createElement("div",{className:"card-content"},a.a.createElement("div",{className:"project-progress"},a.a.createElement("b",{className:"project-name"},t.name),a.a.createElement(N.a,{text:y,styles:{textSize:"150px"},value:y,className:"circular-progress"})),a.a.createElement("p",{className:"project-type"},t.kind),a.a.createElement("p",null,"Deadline | ",f.format("MM.DD.YYYY")),a.a.createElement("p",null,!t.complete&&"".concat(f.diff(d,"day")," days remaining")),a.a.createElement("div",{className:"card-link-list"},a.a.createElement("div",{className:"card-links",onClick:function(e){e.stopPropagation(),s(t)}},"add milestone"),a.a.createElement("div",{className:"card-links",onClick:function(e){e.stopPropagation(),c(t)}},"edit"),a.a.createElement("div",{className:"card-links",onClick:function(e){e.stopPropagation(),i(t.id)}},"delete")))))};function _(){_=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,c=Object.create(o.prototype),l=new L(r||[]);return a(c,"_invoke",{value:k(e,n,l)}),c}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",g={};function v(){}function E(){}function b(){}var y={};s(y,c,function(){return this});var j=Object.getPrototypeOf,w=j&&j(j(D([])));w&&w!==n&&r.call(w,c)&&(y=w);var O=b.prototype=v.prototype=Object.create(y);function S(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){function n(a,o,c,l){var i=m(e[a],e,o);if("throw"!==i.type){var s=i.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,c,l)},function(e){n("throw",e,c,l)}):t.resolve(u).then(function(e){s.value=e,c(s)},function(e){return n("throw",e,c,l)})}l(i.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function k(t,n,r){var a=d;return function(o,c){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var l=r.delegate;if(l){var i=x(l,r);if(i){if(i===g)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=m(t,n,r);if("normal"===s.type){if(a=r.done?h:f,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=h,r.method="throw",r.arg=s.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=m(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return E.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:E,configurable:!0}),E.displayName=s(b,i,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,i,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(N.prototype),s(N.prototype,l,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new N(u(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then(function(e){return e.done?e.value:c.next()})},S(O),s(O,i,"Generator"),s(O,c,function(){return this}),s(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],l=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var i=r.call(c,"catchLoc"),s=r.call(c,"finallyLoc");if(i&&s){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}var x=function(e){var t=e.user,n=e.setUser,o=e.projects,c=e.setProjects,i=e.milestones,s=e.setMilestones,u=Object(r.useState)(!1),d=Object(l.a)(u,2),f=d[0],p=d[1],h=Object(r.useState)(!1),g=Object(l.a)(h,2),y=g[0],j=g[1],S=Object(r.useState)(null),N=Object(l.a)(S,2),x=N[0],C=N[1],T=Object(r.useState)([]),L=Object(l.a)(T,2),D=L[0],P=L[1],M=sessionStorage.token,I=function(){j(!1)};function A(e){if(x&&x.id===e.id)C(null),s(t.milestones.sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)}));else{C(e);var r=t.milestones.filter(function(t){return t.project_id===e.id});r.sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)}),s(r);var a=t.milestones.map(function(e){var t=r.find(function(t){return t.id===e.id});return t||e});n(Object(v.a)({},t,{milestones:a}))}}var G=function(){s(t.milestones.sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)})),C(null)},F=function(e){window.confirm("Are you sure you want to delete this project?")&&function(e){U.apply(this,arguments)}(e)};function U(){return(U=Object(m.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.filter(function(e){return e.project_id===t}),e.next=3,Promise.all(n.map(function(e){return H(e.id)}));case 3:return e.prev=3,e.next=6,fetch("http://localhost:3000/projects/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:M}});case 6:if(e.sent.ok){e.next=9;break}throw new Error("Failed to delete project with id ".concat(t));case 9:s(i.filter(function(e){return e.project_id!==t})),z(t),console.log("Successfully deleted project with id ".concat(t)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error("Error deleting project:",e.t0);case 17:case"end":return e.stop()}},e,null,[[3,14]])}))).apply(this,arguments)}function H(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(m.a)(_().mark(function e(r){var a;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3000/milestones/".concat(r),{method:"DELETE",headers:new Headers({Authorization:M})});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("Failed to delete milestone with ID ".concat(r,". Response status: ").concat(a.status," ").concat(a.statusText));case 6:return e.next=8,new Promise(function(e){s(function(a){var o=a.filter(function(e){return e.id!==r});return n(Object(v.a)({},t,{milestones:t.milestones.filter(function(e){return e.id!==r})})),e(o),o})});case 8:q(r),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error deleting milestone with ID ".concat(r,": ").concat(e.t0.message)),console.error(e.t0.stack);case 15:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}function q(e){s(i.filter(function(t){return t.id!==e}))}function z(e){n(function(t){var n=t.projects.filter(function(t){return t.id!==e}),r=t.milestones.filter(function(t){return t.project_id!==e});return Object(v.a)({},t,{projects:n,milestones:r})}),c(o.filter(function(t){return t.id!==e})),s(i.filter(function(t){return t.project_id!==e}))}var B=function(e){P(e),j(!0)},J=function(e){P(e),p(!0)};return a.a.createElement("div",null,a.a.createElement(E.a,{className:"bootmodal",show:f,onHide:function(){p(!1)}},a.a.createElement(E.a.Body,null,a.a.createElement(w,{user:t,setUser:n,project:D,projects:o,setMilestones:s,setEditFormOpen:p,setProjects:c,initialUser:t}))),a.a.createElement(E.a,{className:"bootmodal",show:y,onHide:I},a.a.createElement(E.a.Body,null,a.a.createElement(O,{user:t,setUser:n,project:D,milestones:s,setMilestones:s,hideMilestoneForm:I}))),0===o.length&&a.a.createElement("h5",null,"No projects (yet)"),a.a.createElement(b.a,{className:"projects-container"},a.a.createElement("div",{className:"list"},a.a.createElement("ul",null,o.map(function(e){return a.a.createElement(k,{key:e.id,project:e,milestones:i,hideProject:G,showProject:A,showEditForm:J,confirmDeleteProject:F,showMilestoneForm:B,selectedProject:x})}),a.a.createElement("br",null)))))};var C=function(e){var t=e.user,n=e.setUser,o=e.setProjects,c=e.templates,i=(e.milestones,e.setMilestones),s=Object(r.useState)(""),u=Object(l.a)(s,2),m=u[0],p=u[1],h=Object(r.useState)(""),E=Object(l.a)(h,2),b=E[0],y=E[1],w=Object(r.useState)(""),O=Object(l.a)(w,2),S=O[0],N=O[1],k=Object(r.useState)(""),_=Object(l.a)(k,2),x=_[0],C=_[1],T=Object(r.useState)(""),L=Object(l.a)(T,2),D=L[0],P=L[1],M=c.filter(function(e){return e.user_id===t.id});return a.a.createElement(d.a,{onSubmit:function(e){e.preventDefault(),e.target.reset(),p(""),y(""),N(""),C(""),fetch("http://localhost:3000/users/".concat(sessionStorage.user_id,"/projects"),{method:"POST",body:JSON.stringify({name:m,kind:S,due_date:b,user_id:sessionStorage.user_id,template:x}),headers:new Headers({Authorization:"".concat(sessionStorage.token),"Content-Type":"application/json"})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return P("Project created successfully."),e.json()}).then(function(e){!function(e){o(function(t){return[].concat(Object(g.a)(t),[{id:e.id,name:e.name,due_date:e.due_date,kind:e.kind,user_id:e.userId}]).sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)})}),n(function(t){var n=[].concat(Object(g.a)(t.projects),[e]);return Object(v.a)({},t,{projects:n})});var t=M.find(function(e){return e.name===x});if(t){var r=t.milestones;r.forEach(function(t){t.project_name=e.name,t.complete=!1,t.project_id=e.id,t.lead_time=parseInt(t.leadTime),t.due_date=j()(e.due_date).subtract(t.lead_time,"day").format("MM.DD.YYYY"),console.log(j()(e.due_date).subtract(t.lead_time,"day").format("MM.DD.YYYY"))}),i(function(e){return[].concat(Object(g.a)(e),Object(g.a)(r)).sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)})}),n(function(e){var t=[].concat(Object(g.a)(e.milestones),Object(g.a)(r));return Object(v.a)({},e,{milestones:t})})}}(e)}).catch(function(e){console.error(e),P("Error creating project.")})}},a.a.createElement(d.a.Group,{controlId:"formProjectName"},a.a.createElement(d.a.Label,{className:"project-form-label"},"Name"),a.a.createElement(d.a.Control,{required:!0,type:"text",placeholder:"Enter project name",value:m,onChange:function(e){return p(e.target.value)}})),a.a.createElement(d.a.Group,{controlId:"formProjectKind"},a.a.createElement(d.a.Label,{className:"project-form-label"},"Type of Project (You Can Also Use a Template)"),a.a.createElement(d.a.Control,{type:"text",value:S,placeholder:'ex: "Wedding Invite Suite',onChange:function(e){return N(e.target.value)}})),a.a.createElement(d.a.Group,{controlId:"formProjectTemplate"},a.a.createElement(d.a.Label,null),a.a.createElement(d.a.Control,{as:"select","aria-label":"Default select example",onChange:function(e){C(e.target.value)},style:{textTransform:"capitalize"}},a.a.createElement("option",{value:""},"No Template"),M.map(function(e){return a.a.createElement("option",{key:e.id,value:e.name},e.name)}))),a.a.createElement(d.a.Group,{controlId:"formProjectDueDate"},a.a.createElement(d.a.Label,{className:"project-form-label"},"Due Date"),a.a.createElement(d.a.Control,{required:!0,type:"date",value:b,onChange:function(e){return y(e.target.value)}})),a.a.createElement(f.a,{variant:"primary",type:"submit"},"Create Project"),a.a.createElement("p",null,D))},T=n(56),L=n(90);var D=function(e){var t=e.templates,n=e.setTemplates,o=(e.user,e.setShowEditTemplateModal),c=(e.setTemplateFormOpen,e.templateToEdit),i=Object(r.useState)(c?c.name:""),s=Object(l.a)(i,2),u=s[0],m=s[1],p=Object(r.useState)(c?c.milestones:[{name:"",leadTime:""}]),h=Object(l.a)(p,2),v=h[0],E=h[1],b=Object(r.useState)(""),y=Object(l.a)(b,2),j=y[0],w=y[1];Object(r.useEffect)(function(){c?(m(c.name),E(c.milestones)):(m(""),E([{name:"",leadTime:""}]))},[c]);var O=function(e,t,n){var r=Object(g.a)(v);r[e][t]=n,E(r)};return a.a.createElement(d.a,{className:"embed",onSubmit:function(e){e.preventDefault(),c&&fetch("http://localhost:3000/templates/".concat(c.id),{method:"PUT",body:JSON.stringify({name:u,milestones:v}),headers:new Headers({Authorization:"".concat(sessionStorage.token),"Content-Type":"application/json"})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return w("Template updated successfully."),e.json()}).then(function(e){var t;console.log("Edit Template Response Data:",e),t=e,n(function(e){return e.map(function(e){return e.id===t.id?t:e})}),setTimeout(function(){o(!1)},2e3)}).catch(function(e){console.error("Edit Template Error:",e),w("Error updating template.")})}},a.a.createElement(d.a.Group,{controlId:"formTemplateName"},a.a.createElement(d.a.Label,null,"Template Name"),a.a.createElement(d.a.Control,{required:!0,type:"text",value:u,onChange:function(e){return m(e.target.value)}})),v.map(function(e,t){return a.a.createElement(d.a.Group,{key:t,controlId:"formMilestone".concat(t)},a.a.createElement(L.a,null,a.a.createElement(T.a,null,a.a.createElement(d.a.Label,null,"Milestone ",t+1),a.a.createElement(d.a.Control,{required:!0,type:"text",value:e.name,onChange:function(e){return O(t,"name",e.target.value)}})),a.a.createElement(T.a,null,a.a.createElement(d.a.Label,null,"Lead Time"),a.a.createElement(d.a.Control,{required:!0,type:"number",min:"1",step:"1",value:e.leadTime,onChange:function(e){return O(t,"leadTime",e.target.value)}})),a.a.createElement(T.a,null,0!==t&&a.a.createElement(f.a,{variant:"danger",type:"button",onClick:function(){return function(e){if(0!==e){var t=Object(g.a)(v);t.splice(e,1),E(t)}}(t)}},a.a.createElement("div",{className:"x"},"\u2a09")))))}),a.a.createElement("br",null),a.a.createElement(f.a,{variant:"secondary",type:"button",onClick:function(){E([].concat(Object(g.a)(v),[{name:"",leadTime:""}]))}},"Add Milestone"),a.a.createElement("br",null),a.a.createElement(f.a,{variant:"primary",type:"submit"},c?"Update":"Create"),a.a.createElement("br",null),a.a.createElement("p",{className:"account-delete-button",type:"button",onClick:function(){c&&window.confirm("Are you sure you want to delete this template?")&&fetch("http://localhost:3000/templates/".concat(c.id),{method:"DELETE",headers:{Authorization:"".concat(sessionStorage.token)}}).then(function(e){if(!e.ok)throw new Error("Failed to delete template");n(t.filter(function(e){return e.id!==c.id})),setTimeout(function(){o(!1)},2e3)}).catch(function(e){console.error("Error deleting template:",e)})}},"Delete Template"),a.a.createElement("p",null,j))};var P=function(e){var t=e.templates,n=e.setTemplates,o=e.user,c=Object(r.useState)(!1),i=Object(l.a)(c,2),s=i[0],u=i[1],m=Object(r.useState)(null),d=Object(l.a)(m,2),p=d[0],h=d[1],g=function(){u(!1)};return a.a.createElement(S.a,{className:"template-list"},a.a.createElement("br",null),a.a.createElement("div",{id:"template.id",className:"Card"},a.a.createElement("h1",{className:"template-headline"},"My Templates"),a.a.createElement("br",null),t.map(function(e){return a.a.createElement("div",{key:e.id,className:"template-info"},a.a.createElement("h1",{className:"project-names"},e.name),a.a.createElement("btn",{className:"normal",onClick:function(){return function(e){h(e),u(!0)}(e)}},"Edit"),a.a.createElement("div",{className:"milestones-container"},e.milestones.sort(function(e,t){return new Date(t.due_date)-new Date(e.due_date)}).map(function(e,t){return a.a.createElement(S.a,{key:e.id,className:"template-milestones"},a.a.createElement("div",{className:"milestone-info"},a.a.createElement("p",null,t+1,". ",e.name," ",e.leadTime," day(s) before due date")),a.a.createElement("br",null))})))}),a.a.createElement("br",null)),a.a.createElement(E.a,{id:"template-modal",show:s,onHide:g},a.a.createElement(E.a.Header,{closeButton:!0},a.a.createElement(E.a.Title,null,"Edit Template")),a.a.createElement(E.a.Body,{id:"template-modal"},a.a.createElement(D,{templates:t,setTemplates:n,user:o,templateToEdit:p,show:s,onHide:g,setShowEditTemplateModal:u})),a.a.createElement(E.a.Footer,null,a.a.createElement(f.a,{variant:"secondary",onClick:g},"Close"))))};var M=function(e){e.templates;var t=e.setTemplates,n=(e.user,e.setTemplateFormOpen),o=Object(r.useState)(""),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(r.useState)([{name:"",leadTime:""}]),m=Object(l.a)(u,2),p=m[0],h=m[1],v=Object(r.useState)(""),E=Object(l.a)(v,2),b=E[0],y=E[1],j=function(e,t,n){var r=Object(g.a)(p);r[e][t]=n,h(r)};return a.a.createElement(d.a,{onSubmit:function(e){e.preventDefault(),fetch("http://localhost:3000/users/".concat(sessionStorage.user_id,"/templates"),{method:"POST",body:JSON.stringify({name:i,milestones:p}),headers:{Authorization:"Bearer ".concat(sessionStorage.token),"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw new Error(e.statusText);return y("Template created successfully."),setTimeout(function(){n(!1)},1e3),e.json()}).then(function(e){return n=e,console.log(n),void t(function(e){return[].concat(Object(g.a)(e),[n])});var n}).catch(function(e){console.error(e),y("Error creating template.")})}},a.a.createElement(d.a.Group,{controlId:"formTemplateName"},a.a.createElement(d.a.Label,null,"Template Name"),a.a.createElement(d.a.Control,{required:!0,type:"text",value:i,onChange:function(e){return s(e.target.value)}})),p.map(function(e,t){return a.a.createElement(d.a.Group,{key:t,controlId:"formMilestone".concat(t),className:"milestone-group"},a.a.createElement(L.a,null,a.a.createElement(T.a,null,a.a.createElement(d.a.Label,{className:"milestone-name"},"Milestone ",t+1),a.a.createElement(d.a.Control,{className:"milestone-name-input",required:!0,type:"text",value:e.name,onChange:function(e){return j(t,"name",e.target.value)}})),a.a.createElement(T.a,null,a.a.createElement(d.a.Label,null,"Lead Time in Days"),a.a.createElement(d.a.Control,{required:!0,className:"milestone-lead-time-input",type:"number",min:"1",step:"1",value:e.leadTime,onChange:function(e){return j(t,"leadTime",e.target.value)}})),a.a.createElement(T.a,{className:"delete-button-col"},0!==t&&a.a.createElement(f.a,{variant:"danger",type:"button",onClick:function(){return function(e){if(0!==e){var t=Object(g.a)(p);t.splice(e,1),h(t)}}(t)}},a.a.createElement("div",{className:"x"},"\u2a09")))))}),a.a.createElement("br",null),a.a.createElement("b",{className:"milestone-options-button",onClick:function(){h([].concat(Object(g.a)(p),[{name:"",leadTime:""}]))}},"Add Milestone"),a.a.createElement("br",null),a.a.createElement(f.a,{className:"normal",id:"template-form-button",type:"submit"},"Create Template"),a.a.createElement("p",null,b))},I=n(120),A=n(121),G=n(119),F=n(96);var U=function(e){var t=e.user,n=e.setUser,o=e.milestone,c=e.milestones,i=e.setMilestones,s=Object(r.useState)(o.name),u=Object(l.a)(s,2),m=u[0],f=u[1],p=Object(r.useState)(o.due_date),h=Object(l.a)(p,2),g=h[0],E=h[1],b=Object(r.useState)(""),y=Object(l.a)(b,2),j=y[0],w=y[1],O=Object(r.useState)(null),S=Object(l.a)(O,2),N=S[0],k=S[1];return Object(r.useEffect)(function(){console.log(t),N&&(f(N.name),E(N.due_date),i(c.map(function(e){return e.id===N.id?N:e}).sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)})))},[N,c,i]),a.a.createElement(d.a,{onSubmit:function(e){e.preventDefault(),e.target.reset(),fetch("http://localhost:3000/milestones/".concat(o.id),{method:"PATCH",body:JSON.stringify({name:m,due_date:g,project_name:o.project_name}),headers:new Headers({Authorization:"".concat(sessionStorage.token),"Content-Type":"application/json"})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).then(function(e){var r=t.milestones.map(function(t){return t.id===e.id?e:t});n(function(e){return Object(v.a)({},e,{milestones:r})}),k(e),w("Milestone updated successfully.")}).catch(function(e){return console.error(e)})}},a.a.createElement("h1",null,"Milestone Details"),a.a.createElement(d.a.Group,null,a.a.createElement(d.a.Label,null,"Name"),a.a.createElement(d.a.Control,{required:!0,type:"text",value:m,onChange:function(e){return f(e.target.value)}})),a.a.createElement(d.a.Group,null,a.a.createElement(d.a.Label,null,"Date"),a.a.createElement(d.a.Control,{required:!0,type:"date",value:g,onChange:function(e){return E(e.target.value)}})),a.a.createElement("button",{className:"normal",type:"submit"},"Update"),a.a.createElement("div",{className:"message"},j?a.a.createElement("p",null,j):null))},H=n(42),Y=n(91),q=n.n(Y),z=n(92),B=n.n(z),J=n(86),R=n.n(J),Z=n(93),V=n.n(Z);var K=function(e){var t=e.milestone,n=e.setMilestones,o=Object(r.useState)(t.notes||""),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(r.useState)(null),m=Object(l.a)(u,2),f=m[0],p=m[1],h=sessionStorage.token;return a.a.createElement(d.a,null,a.a.createElement(d.a.Control,{as:"textarea",value:i,onChange:function(e){var t=e.target.value;s(t)},rows:"8",cols:"50",placeholder:i?"Enter your notes here...":"No notes available."}),a.a.createElement("br",null),a.a.createElement("p",{className:"account-delete-button",onClick:function(){var e={notes:i},r=t.notes?"PATCH":"POST",a={"Content-Type":"application/json",Authorization:"Bearer ".concat(h)};fetch("http://localhost:3000/milestones/".concat(t.id,"/notes"),{method:r,headers:a,body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw new Error("Error: ".concat(e.status," - ").concat(e.statusText));return e.json()}).then(function(e){p("Notes saved successfully"),n(function(n){return n.map(function(n){return n.id===t.id?Object(v.a)({},n,{notes:e.notes}):n})})}).catch(function(e){p("Error saving notes"),console.error("Error saving notes:",e)})}},"Save"),f&&a.a.createElement("p",null,f))};function W(){W=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,c=Object.create(o.prototype),l=new T(r||[]);return a(c,"_invoke",{value:k(e,n,l)}),c}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",g={};function v(){}function E(){}function b(){}var y={};s(y,c,function(){return this});var j=Object.getPrototypeOf,w=j&&j(j(L([])));w&&w!==n&&r.call(w,c)&&(y=w);var O=b.prototype=v.prototype=Object.create(y);function S(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){function n(a,o,c,l){var i=m(e[a],e,o);if("throw"!==i.type){var s=i.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,c,l)},function(e){n("throw",e,c,l)}):t.resolve(u).then(function(e){s.value=e,c(s)},function(e){return n("throw",e,c,l)})}l(i.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function k(t,n,r){var a=d;return function(o,c){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var l=r.delegate;if(l){var i=_(l,r);if(i){if(i===g)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=m(t,n,r);if("normal"===s.type){if(a=r.done?h:f,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=h,r.method="throw",r.arg=s.arg)}}}function _(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=m(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return E.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:E,configurable:!0}),E.displayName=s(b,i,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,i,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(N.prototype),s(N.prototype,l,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new N(u(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then(function(e){return e.done?e.value:c.next()})},S(O),s(O,i,"Generator"),s(O,c,function(){return this}),s(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],l=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var i=r.call(c,"catchLoc"),s=r.call(c,"finallyLoc");if(i&&s){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}var Q=function(e){var t=e.user,n=e.setUser,o=e.milestone,c=e.milestones,i=e.setMilestone,s=e.setMilestones,u=e.showMilestoneEditForm,d=e.today,f=j()(o.due_date),p=j()(o.due_date).format("YYYY-MM-DDTHH:mm:ssZ"),h=j()(o.due_date).add(1,"hour").format("YYYY-MM-DDTHH:mm:ssZ"),g=o.complete,b=Object(r.useState)(!1),y=Object(l.a)(b,2),w=y[0],O=y[1],N=sessionStorage.token,k=Object(r.useState)(null),_=Object(l.a)(k,2),x=_[0],C=_[1],T=function(){var e=Object(m.a)(W().mark(function e(){var t,n;return W().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={summary:o.name,description:o.project_name,start:{dateTime:p,timeZone:"UTC"},end:{dateTime:h,timeZone:"UTC"}},console.log("Event info: ",t),console.log(p),console.log(h),console.log("Google Calendar API Request Payload:",{method:"POST",url:"https://content.googleapis.com/calendar/v3/calendars/primary/events",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.google_token)},body:JSON.stringify({resource:t})}),e.prev=5,console.log("Before Google Calendar API Request"),e.next=9,H.a.client.calendar.events.insert({calendarId:"primary",resource:t});case 9:n=e.sent,console.log("Response:",n),C(n.result.id),P(n.result.id),console.log("Event added to Google Calendar:",n),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(5),console.error("Error adding event to Google Calendar:",e.t0),e.t0.result&&e.t0.result.error&&console.error("Google Calendar API Error:",e.t0.result.error),401===e.t0.status&&console.error("Authentication error. User is not signed in or token expired.");case 21:case"end":return e.stop()}},e,null,[[5,16]])}));return function(){return e.apply(this,arguments)}}(),L=function(e){H.a.auth2.getAuthInstance().isSignedIn.get()?H.a.client.calendar.events.delete({calendarId:"primary",eventId:e}).then(function(e){console.log("Event removed from Google Calendar:",e)}).catch(function(e){console.error("Error removing event from Google Calendar:",e)}):console.error("User is not signed in to Google Calendar or token has expired.")},D=function(){var e=Object(m.a)(W().mark(function e(){return W().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Initiating Google Sign-In..."),e.next=4,H.a.auth2.getAuthInstance().signIn();case 4:console.log("Google Sign-In successful. Creating Google Calendar Event..."),T(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Google Sign-In Error:",e.t0),e.t0.details&&console.error("Google Sign-In Error Details:",e.t0.details);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),P=function(e){var t={google_event_id:e};console.log(e),fetch("http://localhost:3000/milestones/".concat(o.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"".concat(N)},body:JSON.stringify(t)}).then(function(e){if(!e.ok)throw new Error("Error updating milestone with Google Calendar event ID");return e.json()}).then(function(e){console.log("Milestone updated with Google Calendar event ID:",e)}).catch(function(e){console.error("Error updating milestone with Google Calendar event ID:",e)})},M=function(e){window.confirm("Are you sure you want to delete this milestone?")&&function(e,r){fetch("http://localhost:3000/milestones/".concat(e),{method:"DELETE",headers:{Authorization:"".concat(N)}}).then(function(a){if(!a.ok)throw new Error("Failed to delete milestone");console.log("Milestone deleted successfully:",a);var o=c.filter(function(t){return t.id!==e});s(o);var l=t.milestones.filter(function(t){return t.id!==e});n(Object(v.a)({},t,{milestones:l})),r&&x&&L(x)}).catch(function(e){console.error("Error deleting milestone:",e)})}(e,window.confirm("Do you want to remove it from Google Calendar as well?"))};return Object(r.useEffect)(function(){function e(){return(e=Object(m.a)(W().mark(function e(){return W().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.client.init({clientId:"494043831138-f2m2q99nb0if9m034el6vp645n9sffsn.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],scope:"https://www.googleapis.com/auth/calendar",ux_mode:"popup",plugin_name:"calendar"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error google",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}))).apply(this,arguments)}H.a.load("client:auth2",function(){return e.apply(this,arguments)})},[]),a.a.createElement("li",{key:o.id,style:{opacity:g&&"40%"}},a.a.createElement(S.a,{className:"bootstrap-card-no-hover"},a.a.createElement("div",{className:"flag-container"},function(){var e=f.diff(d,"day");return g?a.a.createElement("img",{src:R.a,className:"flag",alt:"Longtime"}):e<0?a.a.createElement("img",{src:q.a,className:"flag",alt:"Overdue"}):e<14?a.a.createElement("img",{src:B.a,className:"flag",alt:"Urgent"}):e<30?a.a.createElement("img",{src:V.a,className:"flag",alt:"Urgent"}):a.a.createElement("img",{src:R.a,className:"flag",alt:"Longtime"})}()," ",a.a.createElement("p",{className:"account-delete-button",id:"milestone-notes",onClick:function(){O(!0)}},"notes")),a.a.createElement("br",null),a.a.createElement("div",{className:"card-content"},a.a.createElement("b",null,o.name),a.a.createElement("br",null),g?a.a.createElement("div",{className:"completion-date"},"Completed on ",j()(o.completion_date).format("MM/DD/YYYY"),a.a.createElement("br",null)):null," ",o.complete?a.a.createElement("p",{style:{lineHeight:2}},o.project_name):o.project_name,o.description,a.a.createElement("p",{className:"milestone-due-date"},j()(o.due_date).format("MM.DD.YYYY")),!g&&a.a.createElement("p",{style:{lineHeight:0,color:j()(o.due_date).diff(d,"day")<=0?"red":"inherit"}},j()(o.due_date).diff(d,"day")<=0?"".concat(-1*j()(o.due_date).diff(d,"day")," days Overdue"):"".concat(j()(o.due_date).diff(d,"day")," days remaining")),a.a.createElement("p",{onClick:function(){return function(e){var t=!o.complete,n={complete:t,completion_date:j()().format("DD/MM/YYYY")};fetch("http://localhost:3000/milestones/".concat(e,"/complete"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"".concat(sessionStorage.token)},body:JSON.stringify(n)}).then(function(e){if(!e.ok)throw new Error("Error updating milestone");return e.json()}).then(function(r){var a=c.map(function(r){return r.id===e?Object(v.a)({},r,{complete:t,completion_date:n.completion_date}):r});s(a),console.log("Milestones after update:",a),console.log("Milestone updated successfully:",r)}).catch(function(e){console.error("Error updating milestone:",e)})}(o.id)},className:"card-links",id:"complete-button"},"mark complete"),a.a.createElement("div",{className:"card-link-list",id:"milestone-link-list"},a.a.createElement("p",{className:"card-links",onClick:function(){return u(o)}},"edit"),a.a.createElement("p",{className:"card-links",onClick:function(){return M(o.id)}},"delete"),a.a.createElement("p",{className:"account-delete-button",onClick:function(){return D()}},"add to google")),a.a.createElement(E.a,{show:w,onHide:function(){O(!1)}},a.a.createElement(E.a.Header,{closeButton:!0},a.a.createElement(E.a.Title,null,"Notes on ",o.name,"(",o.project_name,")")),a.a.createElement(E.a.Body,null,a.a.createElement(K,{milestone:o,setMilestone:i,setMilestones:s}))))))};var X=function(e){var t,n=e.user,o=e.setUser,c=e.milestones,i=e.setMilestones,s=(e.milestone,e.setMilestone),u=e.handleMilestoneToggle,m=e.showMilestoneEditForm,d=e.today,f=Object(r.useState)("all"),p=Object(l.a)(f,2),h=p[0],g=p[1],v="incomplete"===(t=h)?c.filter(function(e){return!e.complete}):"completed"===t?c.filter(function(e){return e.complete}):c;console.log(v);var E=function(e){g(e)};return a.a.createElement("div",{className:"milestone-list"},a.a.createElement("div",{className:"headline"}," Milestones",a.a.createElement("div",{id:"milestone-options"},a.a.createElement("p",{className:"milestone-options-button",onClick:function(){return E("all")}},"all"),a.a.createElement("p",{className:"milestone-options-button",onClick:function(){return E("incomplete")}},"incomplete"),a.a.createElement("p",{className:"milestone-options-button",onClick:function(){return E("completed")}},"completed"))),a.a.createElement("div",{className:"Container"},0===v.length&&a.a.createElement("h5",null,"No milestones (yet)"),a.a.createElement("ul",null,v.map(function(e){return a.a.createElement("div",{key:e.id},a.a.createElement(Q,{key:e.id,user:n,setUser:o,milestone:e,setMilestone:s,handleMilestoneToggle:u,showMilestoneEditForm:m,milestones:v,setMilestones:i,today:d}))}))))},$=n(95);n(110);var ee=function(e){var t=e.milestones,n=Object(r.useState)(null),o=Object(l.a)(n,2),c=o[0],i=o[1],s=function(){if(!c)return[];var e=c.toISOString().split("T")[0];return t.filter(function(t){return t.due_date===e})};return a.a.createElement("div",{className:"calendar-box"},a.a.createElement($.a,{className:"user-calendar",onClickDay:function(e){i(e)},tileContent:function(e){var n=e.date,r=(e.view,n.toISOString().split("T")[0]);return t.some(function(e){return e.due_date===r})?a.a.createElement("p",null,"\u2022"):null}}),a.a.createElement("br",null),c&&a.a.createElement("div",{className:"calendar-details"},a.a.createElement("h4",null,c.toDateString()),a.a.createElement("br",null),s().length>0?s().map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("p",null,"Milestone: ",e.name,a.a.createElement("br",null),"Project: ",e.project_name),t!==s().length-1&&a.a.createElement("hr",null)," ")}):a.a.createElement("p",null,"No milestones due on this date")))};var te=function(e){var t=e.user,n=e.setUser,o=e.setEditFormOpen,c=Object(r.useState)(t.name||""),i=Object(l.a)(c,2),s=i[0],u=i[1],m=Object(r.useState)(t.email||""),f=Object(l.a)(m,2),p=f[0],h=f[1],g=Object(r.useState)(""),E=Object(l.a)(g,2),b=E[0],y=E[1];return Object(r.useEffect)(function(){console.log("UseEffect - user:",t),u(t.name||""),h(t.email||"")},[t]),a.a.createElement(d.a,{onSubmit:function(e){e.preventDefault(),fetch("http://localhost:3000/users/".concat(t.id),{method:"PATCH",body:JSON.stringify({name:s,email:p}),headers:new Headers({Authorization:"".concat(sessionStorage.token),"Content-Type":"application/json"})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).then(function(t){!function(e){n(function(t){return Object(v.a)({},t,e)})}(t),o(!1),y("User updated!"),setTimeout(function(){return y("")},2e3),e.target.reset()})}},a.a.createElement(d.a.Label,{className:"project-form-label"},"Name"),a.a.createElement(d.a.Control,{required:!0,type:"text",value:s,className:"input-container",onChange:function(e){console.log("Name input value:",e.target.value),u(e.target.value)}}),a.a.createElement("br",null),a.a.createElement(d.a.Label,{className:"project-form-label"},"Email"),a.a.createElement(d.a.Control,{type:"text",value:p,className:"input-container",maxLength:50,onChange:function(e){console.log("Email input value:",e.target.value),h(e.target.value)}}),a.a.createElement("button",{className:"normal",type:"submit"},"Update"),a.a.createElement("div",{className:"message"},b?a.a.createElement("p",null,b):null))};var ne=function(e){var t=e.user,n=e.setUser,o=e.setUsers,i=e.setEditFormOpen,s=e.onConfirmDelete,u=(e.onCancelDelete,Object(r.useState)(!1)),m=Object(l.a)(u,2),d=m[0],f=m[1],p=Object(c.p)();return a.a.createElement("div",null,a.a.createElement("p",{className:"profile-text"},"Edit Account Details"),a.a.createElement(te,{user:t,setUser:n,setUsers:o,setEditFormOpen:i}),d?a.a.createElement("p",null,t.name," has been deleted."):a.a.createElement("div",null,a.a.createElement("br",null),a.a.createElement("p",{className:"account-delete-button",onClick:function(){window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&(fetch("http://localhost:3000/users/delete/".concat(sessionStorage.user_id),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(e){e.ok?(s(),f(!1),p("/login")):console.error("Failed to delete user")}).catch(function(e){console.error("Error deleting user:",e)}),f(!0))}},"Delete Account"),a.a.createElement("br",null)))};n(111);var re=function(){var e=Object(r.useState)({}),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)([]),s=Object(l.a)(i,2),u=s[0],m=s[1],d=Object(r.useState)([]),f=Object(l.a)(d,2),p=f[0],h=f[1],y=Object(r.useState)([]),j=Object(l.a)(y,2),O=j[0],S=j[1],N=Object(r.useState)([]),k=Object(l.a)(N,1)[0],_=Object(r.useState)(!1),T=Object(l.a)(_,2),L=T[0],D=T[1],H=Object(r.useState)(!1),Y=Object(l.a)(H,2),q=Y[0],z=Y[1],B=Object(r.useState)(!1),J=Object(l.a)(B,2),R=J[0],Z=J[1],V=Object(r.useState)(!1),K=Object(l.a)(V,2),W=K[0],Q=K[1],$=Object(r.useState)(!1),te=Object(l.a)($,2),re=te[0],ae=te[1],oe=Object(r.useState)(!1),ce=Object(l.a)(oe,2),le=ce[0],ie=ce[1],se=Object(r.useState)(!1),ue=Object(l.a)(se,2),me=ue[0],de=ue[1],fe=Object(r.useState)(!1),pe=Object(l.a)(fe,2),he=pe[0],ge=pe[1],ve=sessionStorage.token,Ee=Object(c.p)(),be=function(e){var t=e.find(function(e){return e.email===sessionStorage.email});if(t){o(function(e){return Object(v.a)({},e,t)});var n=t.id,r=t.projects,a=t.milestones,c=t.templates;if(n&&r&&a&&c){var l=Object(g.a)(r).sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)}),i=Object(g.a)(a).sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)});i.forEach(function(e){var t=l.find(function(t){return t.id===e.project_id});e.project_name=t?t.name:""}),i.sort(function(e,t){return e.complete-t.complete}),sessionStorage.user_id=n,S(c),m(l),h(i)}else console.error("Missing required data for user")}else console.error("Current user not found")},ye=function(){D(function(e){return!e})},je=function(){de(function(e){return!e})},we=function(){z(function(e){return!e})},Oe=function(){Z(function(e){return!e})},Se=function(){console.log("showUserProfile function called"),ge(!0)};return Object(r.useEffect)(function(){sessionStorage.token?fetch("http://localhost:3000/users/",{method:"GET",headers:new Headers({Authorization:ve})}).then(function(e){return e.json()}).then(function(e){return be(e)}):Ee("/login")},[]),a.a.createElement("div",{className:"page"},a.a.createElement(I.a,{className:"Navbar d-none d-lg-block",id:"navbar"},a.a.createElement(b.a,{id:"nav-container"},a.a.createElement("img",{src:"/2.png",className:"NavBarLogo",alt:"docket logo"}),a.a.createElement(I.a.Brand,null,"Docket"),a.a.createElement(A.a,null,a.a.createElement(A.a.Link,{onClick:we},"Templates"),a.a.createElement(A.a.Link,{onClick:Oe},"Add Template"),a.a.createElement(A.a.Link,{onClick:ye},"Add Project"),a.a.createElement(A.a.Link,{onClick:je},"Calendar"),a.a.createElement(A.a.Link,{onClick:Se,user:n}," Account "))),a.a.createElement("p",{className:"logout-group"},"Hello, ",n.name," | ",a.a.createElement("a",{href:"/logout",className:"logout-button"},"Logout"))),a.a.createElement(I.a,{className:"Navbar d-lg-none",id:"small-navbar"},a.a.createElement("img",{src:"/2.png",className:"NavBarLogo",alt:"docket logo"}),a.a.createElement(I.a.Brand,null,"Docket"),a.a.createElement(G.a,{id:"dropdown-basic-button",title:"Menu"},a.a.createElement(F.a.Item,{onClick:we},"Templates"),a.a.createElement(F.a.Item,{onClick:Oe},"Add Template"),a.a.createElement(F.a.Item,{onClick:ye},"Add Project"),a.a.createElement(F.a.Item,{onClick:je},"Calendar"),a.a.createElement(F.a.Item,{onClick:Se},"Account"),a.a.createElement(F.a.Item,{href:"/logout"},"Logout"))),a.a.createElement(E.a,{className:"bootmodal",show:L,onHide:ye},a.a.createElement(E.a.Body,null,a.a.createElement(C,{user:n,setUser:o,setProjects:m,templates:O,milestones:p,setMilestones:h}))),a.a.createElement(E.a,{className:"bootmodal",show:q,onHide:we},a.a.createElement(E.a.Body,null,a.a.createElement(P,{templates:O,setTemplates:S,user:n}))),a.a.createElement(E.a,{className:"bootmodal",show:R,onHide:Oe},a.a.createElement(E.a.Body,null,a.a.createElement(M,{templates:O,setTemplates:S,user:n,setTemplateFormOpen:Z}))),a.a.createElement(E.a,{className:"bootmodal",id:"edit-project",show:W,onHide:function(){Q(!1)}},a.a.createElement(E.a.Body,null,a.a.createElement(w,{user:n,setUser:o,project:k,projects:u,setProjects:m,setMilestones:h,initialUser:n}))),a.a.createElement(E.a,{className:"bootmodal",show:le,onHide:function(){ie(!1)}},a.a.createElement(E.a.Body,null,a.a.createElement(U,{user:n,setUser:o,templates:O,milestone:re,setMilestone:ae,milestones:p,setMilestones:h}))),a.a.createElement(E.a,{className:"bootmodal",show:he,onHide:function(){ge(!1),console.log(he)}},a.a.createElement(E.a.Body,null,a.a.createElement(ne,{user:n,setUser:o,setEditFormOpen:Q,onConfirmDelete:function(){alert("Your account has been deleted successfully."),sessionStorage.clear(),Ee("/login")}}))),a.a.createElement(E.a,{className:"calendar-bootmodal",show:me,onHide:je},a.a.createElement(ee,{milestones:p})),a.a.createElement("br",null),a.a.createElement("div",{className:"project-list"},a.a.createElement("p",{id:"projects-headline"},"Projects"),a.a.createElement(x,{user:n,setUser:o,projects:u,setProjects:m,milestones:p,setMilestones:h,templates:O})),a.a.createElement(X,{user:n,setUser:o,milestones:p,setMilestone:ae,setMilestones:h,projects:u,setProjects:m,templates:O,setTemplates:S,showMilestoneEditForm:function(e){ae(e),ie(!0)},handleMilestoneToggle:function(e){var t=Object(g.a)(p),n=t.find(function(t){return t.id===e});n.complete=!n.complete,t.sort(function(e,t){return new Date(e.due_date)-new Date(t.due_date)});var r=t.sort(function(e,t){return e.complete-t.complete});h(r),fetch("http://localhost:3000/milestones/".concat(e,"/complete"),{method:"PATCH",body:JSON.stringify({name:n.name,complete:n.complete}),headers:new Headers({Authorization:"".concat(sessionStorage.token),"Content-Type":"application/json"})})}}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("div",null))},ae=n(19),oe=n(27),ce=n(35),le=n(18),ie=n(33),se=function(e){function t(){return Object(ae.a)(this,t),Object(ce.a)(this,Object(le.a)(t).apply(this,arguments))}return Object(ie.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.clearUser()}},{key:"clearUser",value:function(){window.sessionStorage.clear()}},{key:"render",value:function(){return a.a.createElement(c.a,{to:"/login"})}}]),t}(r.Component),ue=function(){return a.a.createElement("div",null,a.a.createElement(s.b,{clientId:"494043831138-f2m2q99nb0if9m034el6vp645n9sffsn.apps.googleusercontent.com"},a.a.createElement(i.Provider,{value:"hello"},a.a.createElement(o.a,null,a.a.createElement(c.d,null,a.a.createElement(c.b,{exact:!0,path:"/login",element:a.a.createElement(u,null)}),a.a.createElement(c.b,{exact:!0,path:"/signup",element:a.a.createElement(h,null)}),a.a.createElement(c.b,{exact:!0,path:"/",element:a.a.createElement(re,null)}),a.a.createElement(c.b,{exact:!0,path:"/logout",element:a.a.createElement(se,null)}))))))},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,122)).then(function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)})},de=n(94),fe=document.getElementById("root");Object(de.createRoot)(fe).render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ue,null))),me()},86:function(e,t,n){e.exports=n.p+"static/media/NonUrgent.a5ca7c5f.png"},91:function(e,t,n){e.exports=n.p+"static/media/Overdue.8f8c505a.png"},92:function(e,t,n){e.exports=n.p+"static/media/Upcoming.936d036e.png"},93:function(e,t,n){e.exports=n.p+"static/media/MediumUrgent.6addf8f7.png"},97:function(e,t,n){e.exports=n(114)},99:function(e,t,n){}},[[97,1,2]]]);
//# sourceMappingURL=main.1912a0cc.chunk.js.map